--[[    Script: IGER's Lasthitbot v0.3    Author: PedobearIGER    Configuration:    -lasthitHoldKey: While holding this key down you will automatically lasthit every minion which is killable. [default: g]    -lasthitToggleKey: Press this key to swich between lasthitting and not lasthitting. [default: t]    -safeLasthit: Use this feature to hold position and stop attacking not killable minions.]]--require "Utils"local version = "0.3"local lasthitHoldKey = 71local lasthitToggleKey = 84local safeLasthitToggle = falselocal safeLasthitHold = truelocal player = GetSelf()local minions = {}local bestLasthitMinion = nillocal playerTeam = nillocal print = printtextLasthitConfig = scriptConfig("IGER's LasthitBot 0.3","LasthitBot")LasthitConfig:addParam("enableHoldLasthitting", "LasthitBot Hold", SCRIPT_PARAM_ONKEYDOWN, false, lasthitHoldKey)LasthitConfig:addParam("enableToggleLasthitting", "LasthitBot Toggle", SCRIPT_PARAM_ONKEYTOGGLE, true, lasthitToggleKey)LasthitConfig:permaShow("enableHoldLasthitting")LasthitConfig:permaShow("enableToggleLasthitting")repeat    if string.format(player.team) == "100" then        playerTeam = "blue"    elseif  string.format(player.team) == "200" then          playerTeam = "red"    enduntil playerTeam ~= nil and playerTeam ~= "0"for i=1, objManager:GetMaxObjects(), 1 do    local object = objManager:GetObject(i)    if object and object ~= nil and string.find(object.name,"Minion") then table.insert(minions,object) endendfunction Lasthit(safeLasthit)    DrawTextObject("LASTHITTING",player,0xFFFF0000)    if #minions > 0 then        player = GetSelf()        for i,minion in ipairs(minions) do            if (((minion.name == "Blue_Minion_Basic" or minion.name == "Blue_Minion_Wizard" or minion.name == "Blue_Minion_MechCannon" or minion.name == "Blue_Minion_MechMelee") and playerTeam == "red") or ((minion.name == "Red_Minion_Basic" or minion.name == "Red_Minion_Wizard" or minion.name == "Red_Minion_MechCannon" or minion.name == "Red_Minion_MechMelee") and playerTeam == "blue")) and GetDistance(player,minion) < player.range+100 and CalcPhysDamage(minion,player.baseDamage+player.addDamage) > minion.health and (bestLasthitMinion == nil or GetDistance(player,minion) < GetDistance(player,bestLasthitMinion)) and player.team ~= minion.team then bestLasthitMinion = minion end        end        if bestLasthitMinion ~= nil then            AttackTarget(bestLasthitMinion)            DrawCircleObject(bestLasthitMinion,80,2)        elseif safeLasthit then StopMove() end    endendfunction UpdateMinionTable()    if bestLasthitMinion ~= nil and bestLasthitMinion.dead == 1 then bestLasthitMinion = nil end    for i,minion in ipairs(minions) do         if minion.dead == 1 or (((minion.name == "Blue_Minion_Basic" or minion.name == "Blue_Minion_Wizard" or minion.name == "Blue_Minion_MechCannon" or minion.name == "Blue_Minion_MechMelee") and playerTeam == "blue") or ((minion.name == "Red_Minion_Basic" or minion.name == "Red_Minion_Wizard" or minion.name == "Red_Minion_MechCannon" or minion.name == "Red_Minion_MechMelee") and playerTeam == "red")) or minion == nil or not minion then table.remove(minions,i) end    end    for i=1, objManager:GetMaxNewObjects(), 1 do        object = objManager:GetNewObject(i)        if object and object ~= nil and string.find(object.name,"Minion") then table.insert(minions,object) end    endendfunction CalcPhysDamage(object,dmg)    if object and dmg and object ~= nil and dmg  ~= nil then        if object.armor >= 0 then return dmg*(100/(100+object.armor))        elseif object.armor < 0 then return dmg*(2-(100/(100-object.armor))) end    endendfunction GetDistance(o1,o2)    if o1 and o2 and o1 ~= nil and o2 ~= nil then return math.sqrt(math.pow(o1.x - o2.x, 2) + math.pow(o1.z - o2.z, 2)) endendfunction OnTick()    Util__OnTick()    UpdateMinionTable()    if LasthitConfig.enableHoldLasthitting then Lasthit(safeLasthitHold) end    if LasthitConfig.enableToggleLasthitting then Lasthit(safeLasthitToggle) endendprinttext(" >> IGER's LasthitBot "..version.." loaded!\n")SetTimerCallback("OnTick")